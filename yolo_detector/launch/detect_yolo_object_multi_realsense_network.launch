<?xml version="1.0"?>
<launch>

  <arg name="sensor_name_1" default="camera_1" />
  <arg name="sensor_name_2" default="camera_2" />
  <arg name="training_set" default="$(optenv OPT_OBJECT_TRAINING coco)" />
  
  <!-- Launch object detection node -->
  <node pkg="yolo_detector" type="open_ptrack_yolo_object_detector_node_multi"
        name="$(arg sensor_name)_yolo_object_detector_node" output="screen" respawn="false">
        
    <param name="sensor_name_1"             value="$(arg sensor_name_1)" />
    <param name="sensor_name_2"             value="$(arg sensor_name_2)" />    
    <param name="world_frame_id"            value="/world"/>
    
    <param name="depth_image_topic_1"                   value="/$(arg sensor_name_1)/depth/image_rect_raw"/>
    <param name="rgb_image_topic_1"                  value="/$(arg sensor_name_1)/color/image_rect_color"/>
    <param name="camera_info_topic_1"                 value="/$(arg sensor_name_1)/color/camera_info"/>
    
    <param name="depth_image_topic_2"                   value="/$(arg sensor_name_2)/depth/image_rect_raw"/>
    <param name="rgb_image_topic_2"                  value="/$(arg sensor_name_2)/color/image_rect_color"/>
    <param name="camera_info_topic_2"                 value="/$(arg sensor_name_2)/color/camera_info"/>
    
    <param name="output_topic"                      value="/objects_detector/detections"/>
    
    
<!-- These thresholds are overriden by dyanmic configuration. EDIT DEFAULTS in cfg/open_ptrack_2olo.cfg -->
    <param name="thresh"                              value="0.4"/>  
    <param name="hier_thresh"                     value="0.5"/>  
    <param name="median_factor"                 value="0.3"/>
    
        <param name="data_cfg"                   value="$(find yolo_detector)/darknet_opt/cfg/$(arg training_set).data"/>
    <param name="yolo_cfg"                  value="$(find yolo_detector)/darknet_opt/cfg/$(arg training_set)-test.cfg"/>
    <param name="weight_file"                      value="$(find yolo_detector)/darknet_opt/$(arg training_set).weights"/>
        <param name="name_file"                      value="$(find yolo_detector)/data/$(arg training_set).names"/>
    <param name="encoding_type"                      value="32FC1"/>
    <param name="in_mm"                      value="1"/>
    
    <param name="root"                      value="$(find yolo_detector)"/>

  </node>

</launch>
